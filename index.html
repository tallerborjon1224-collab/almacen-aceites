<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AlmacÃ©n de Aceites</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff8c1a">
    <link rel="icon" type="image/png" href="icono.png">


<style>

:root{
    --naranja:#ff8c1a;
    --negro:#000;
    --gris:#1a1a1a;
    --gris2:#262626;
    --blanco:#fff;
}

/* ================= BASE ================= */

body{
    margin:0;
    background:var(--negro);
    color:var(--blanco);
    font-family:Arial, sans-serif;
    padding:20px;
    padding-bottom:120px;
}

h1{
    text-align:center;
    color:var(--naranja);
}

.seccion{ display:none; }
.seccion.activa{ display:block; }

/* ================= ALMACEN ================= */

.almacen{
    display:flex;
    justify-content:center;
    align-items:flex-start;
    gap:40px;
    max-width:1200px;
    margin:30px auto;
    flex-wrap:wrap;
}

.card{
    width:420px;
    background:var(--gris);
    border-radius:20px;
    border:2px solid var(--naranja);
    padding:20px;
}

.card h2{
    text-align:center;
    color:var(--naranja);
}

.marca{
    background:var(--gris2);
    border-radius:16px;
    padding:16px;
    margin-bottom:20px;
}

.marca h3{
    text-align:center;
    color:#ffd199;
}

.subtitulo{
    text-align:center;
    font-weight:bold;
    color:var(--naranja);
    margin:12px 0 8px;
    border-bottom:1px solid var(--naranja);
    padding-bottom:4px;
}

.fila{
    display:grid;
    grid-template-columns: 1.6fr 45px 30px 30px;
    gap:6px;
    align-items:center;
    margin-bottom:6px;
}

.numero{
    text-align:center;
    font-size:17px;
    font-weight:bold;
}

/* ================= BOTONES ================= */

button{
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-size:15px;
    transition:0.15s ease;
}

button:active{
    transform:scale(0.95);
}

.restar{ background:#444; color:white; }
.sumar{ background:var(--naranja); color:black; }

/* ================= REGISTRO ================= */

.registro{
    max-width:900px;
    margin:30px auto;
}

.registro table{
    width:100%;
    border-collapse:collapse;
}

.registro th,.registro td{
    border:1px solid var(--naranja);
    padding:8px;
    text-align:center;
}

.registro input{
    width:100%;
    background:#000;
    color:#fff;
    border:none;
    text-align:center;
}

/* ================= MENU INFERIOR ================= */

.menu{
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    background:#111;
    border-top:2px solid var(--naranja);
    display:flex;
    justify-content:center;
    gap:20px;
    padding:10px 0;
    z-index:9999;
}

.menu button{
    background:var(--gris2);
    color:white;
    border:1px solid var(--naranja);
    padding:10px 18px;
    border-radius:12px;
    font-size:14px;
}

.menu button.activo{
    background:var(--naranja);
    color:black;
}

/* ================= ESTADO GUARDADO ================= */


/* ================= RESPONSIVE CELULAR ================= */

@media (max-width:768px){

    body{
        padding:10px;
        padding-bottom:130px;
    }

    .card{
        width:100%;
    }

    .almacen{
        gap:20px;
    }

    h1{
        font-size:22px;
    }

    .fila{
        grid-template-columns:1fr 40px 35px 35px;
    }

    .menu button{
        font-size:13px;
        padding:8px 12px;
    }

}
    /* ===== NUEVO DISEÃ‘O VENTAS ===== */

.ventas-card{
    max-width:900px;
    margin:auto;
    padding:30px;
}

.tabla-ventas{
    width:100%;
    border-collapse:collapse;
    font-size:18px;
}

.tabla-ventas th{
    padding:15px;
    border-bottom:2px solid orange;
}

.tabla-ventas td{
    padding:15px;
    text-align:center;
}

.tabla-ventas select,
.tabla-ventas input{
    width:100%;
    padding:8px;
    font-size:16px;
    text-align:center;
}

.botones-ventas{
    display:flex;
    justify-content:center;
    gap:15px;
    margin-top:20px;
    flex-wrap:wrap;
}

.ganancia{
    text-align:center;
    font-size:24px;
    margin-top:20px;
}

/* RESPONSIVO PARA CELULAR */
@media(max-width:600px){

    .tabla-ventas{
        font-size:14px;
    }

    .ventas-card{
        padding:15px;
    }

    .ganancia{
        font-size:20px;
    }
}

    /* ================= NUEVO REGISTRO ================= */

.registro-nuevo{
    max-width:900px;
    margin:auto;
    background:var(--gris);
    border:2px solid var(--naranja);
    border-radius:20px;
    padding:25px;
}

.form-carro{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:20px;
}

.campo{
    display:flex;
    flex-direction:column;
}

.campo label{
    margin-bottom:5px;
    font-weight:bold;
    color:var(--naranja);
}

.campo input{
    padding:10px;
    border-radius:8px;
    border:none;
    background:#000;
    color:white;
    font-size:15px;
}

.btn-guardar{
    margin-top:20px;
    width:100%;
    padding:12px;
    font-size:16px;
}

#listaCarros{
    margin-top:20px;
}

.tarjeta-carro{
    background:var(--gris2);
    padding:15px;
    border-radius:12px;
    margin-bottom:15px;
    border-left:5px solid var(--naranja);
}

.tarjeta-carro button{
    margin-top:10px;
}

/* CELULAR */
@media(max-width:600px){
    .form-carro{
        grid-template-columns:1fr;
    }
}
</style>
</head>

<body>

  
    
   


<section id="registro" class="seccion">
<h1>Registro de Carros</h1>

<div class="registro-nuevo">

<div class="form-carro">
    <div class="campo">
        <label>Placas</label>
        <input type="text" id="placas">
    </div>

    <div class="campo">
        <label>Marca</label>
        <input type="text" id="marca">
    </div>

    <div class="campo">
        <label>Modelo</label>
        <input type="text" id="modelo">
    </div>

    <div class="campo">
        <label>Servicio Realizado</label>
        <input type="text" id="servicio">
    </div>

    <div class="campo">
        <label>Fecha</label>
        <input type="date" id="fecha">
    </div>
</div>

<button onclick="guardarCarro()" class="sumar btn-guardar">
    Guardar Registro
</button>

<hr>

<div id="listaCarros"></div>

</div>
</section>
<section id="almacen" class="seccion activa">

<h1>AlmacÃ©n de Aceites</h1>

<div class="almacen">

<!-- ================= 5W-30 ================= -->
<div class="card">
<h2>Aceite 5W-30</h2>

<!-- VALVOLINE -->
<div class="marca">
<h3>VALVOLINE</h3>
<div class="subtitulo">GALONES</div>
<div class="fila" data-precio="850">><span>SintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila" data-precio="850"><span>SemisintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila" data-precio="850"><span>Multigrado</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>

<div class="subtitulo">CUARTOS</div>
<div class="fila"><span>SintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>SemisintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>Multigrado</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
</div>

<!-- MOBIL -->
<div class="marca">
<h3>MOBIL SUPER</h3>
<div class="subtitulo">GALONES</div>
<div class="fila"><span>SintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>SemisintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>Multigrado</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>

<div class="subtitulo">CUARTOS</div>
<div class="fila"><span>SintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>SemisintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>Multigrado</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
</div>

<!-- SUPREME -->
<div class="marca">
<h3>SUPREME</h3>
<div class="subtitulo">GALONES</div>
<div class="fila"><span>SintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>SemisintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>Multigrado</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>

<div class="subtitulo">CUARTOS</div>
<div class="fila"><span>SintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>SemisintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>Multigrado</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
</div>

<!-- ACDELCO -->
<div class="marca">
<h3>ACDELCO</h3>
<div class="subtitulo">GALONES</div>
<div class="fila"><span>SintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>SemisintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>Multigrado</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>

<div class="subtitulo">CUARTOS</div>
<div class="fila"><span>SintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>SemisintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>Multigrado</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
</div>
</div>


<!-- ================= 10W-30 ================= -->
<div class="card">
<h2>Aceite 10W-30</h2>

<div class="marca">
<h3>VALVOLINE</h3>
<div class="subtitulo">GALONES</div>
<div class="fila"><span>SintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>SemisintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>Multigrado</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>

<div class="subtitulo">CUARTOS</div>
<div class="fila"><span>SintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>SemisintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>Multigrado</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
</div>

<div class="marca">
<h3>SHELL</h3>
<div class="subtitulo">GALONES</div>
<div class="fila"><span>SintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>SemisintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>Multigrado</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>

<div class="subtitulo">CUARTOS</div>
<div class="fila"><span>SintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>SemisintÃ©tico</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
<div class="fila"><span>Multigrado</span><div class="numero" data-count>0</div><button class="restar">âž–</button><button class="sumar">âž•</button></div>
</div>
</div>
</div>
</section> 

<!-- ================= VENTAS ================= -->
<!-- ================= VENTAS NUEVO DISEÃ‘O ================= -->
<section id="ventas" class="seccion">
<h1>Venta de Aceite</h1>

<div class="card ventas-card">

<table class="tabla-ventas">
<thead>
<tr>
<th style="width:40%;">Producto</th>
<th style="width:15%;">Cantidad</th>
<th style="width:15%;">Precio</th>
<th style="width:15%;">Total</th>
</tr>
</thead>

<tbody>
<tr>
<td>
<select id="productoVenta"></select>
</td>

<td>
<input type="number" id="cantidadVenta" min="1" value="1">
</td>

<td>
$<span id="precioUnitario">0</span>
</td>

<td>
$<span id="totalVenta">0</span>
</td>
</tr>
</tbody>
</table>

<div class="botones-ventas">
<button onclick="calcularTotal()" class="sumar">Calcular</button>
<button onclick="vender()" class="sumar">Confirmar</button>
<button onclick="cancelarVenta()" class="restar">Cancelar</button>
</div>

<hr>
    <h2 style="text-align:center; color:orange;">Historial de Ventas</h2>

<div id="listaHistorial"></div>

<h2 class="ganancia">
Ganancia Hoy: $<span id="gananciaHoy">0</span>
</h2>

<div class="botones-ventas">
<button onclick="borrarVentasHoy()" class="restar">
Borrar Ventas de Hoy
</button>

<button onclick="reiniciarTodo()" class="restar">
Reiniciar Todo
</button>
</div>

</div>
</section>

<script>
function mostrar(id){
    document.querySelectorAll('.seccion').forEach(s=>{
        s.classList.remove('activa');
    });
    document.getElementById(id).classList.add('activa');

    document.querySelectorAll('.menu button').forEach(b=>{
        b.classList.remove('activo');
    });
    document.getElementById(
        'btn' + id.charAt(0).toUpperCase() + id.slice(1)
    ).classList.add('activo');
}

function agregarFila(){
    const tr = document.createElement("tr");
    tr.innerHTML = `
        <td><input></td>
        <td><input></td>
        <td><input></td>
        <td><input></td>
        <td><input type="date"></td>
    `;
    document.getElementById("tablaCarros").appendChild(tr);
}
</script>

<div class="menu">
<button id="btnAlmacen" class="activo" onclick="mostrar('almacen')">ðŸ›¢ Inventario</button>
<button id="btnVentas" onclick="mostrar('ventas')">ðŸ’° Ventas</button>
<button id="btnRegistro" onclick="mostrar('registro')">ðŸš— Registro</button>
</div>
<script>
let temporizador = null;

// ðŸ”¹ Obtener datos del almacen desde pantalla
function obtenerAlmacen() {
  return [...document.querySelectorAll(".fila")].map((fila, i) => ({
    id: i,
    cantidad: Number(fila.querySelector("[data-count]").textContent)
  }));
}

// ðŸ”¹ Guardar en localStorage
function guardarLocal() {
  const datos = { almacen: obtenerAlmacen() };
  localStorage.setItem("almacenAceites", JSON.stringify(datos));
  actualizarBotonEstado("guardado");
}

// ðŸ”¹ Cargar desde localStorage
function cargarLocal() {
  const guardado = localStorage.getItem("almacenAceites");
  if (!guardado) return;

  const data = JSON.parse(guardado);
  const numeros = document.querySelectorAll("[data-count]");

  data.almacen.forEach((item, i) => {
    if (numeros[i]) {
      numeros[i].textContent = item.cantidad;
    }
  });
}



// ðŸ”¹ Eventos sumar/restar
document.addEventListener("click", e => {
  if (e.target.classList.contains("sumar") || e.target.classList.contains("restar")) {

    const fila = e.target.closest(".fila");
    const num = fila.querySelector("[data-count]");
    let v = Number(num.textContent);

    v += e.target.classList.contains("sumar") ? 1 : -1;
    num.textContent = Math.max(0, v);

    actualizarBotonEstado("pendiente");

    clearTimeout(temporizador);
    temporizador = setTimeout(() => {
      guardarLocal();
    }, 1000);
  }
});

// ðŸ”¹ Cargar al abrir pÃ¡gina
window.addEventListener("load", cargarLocal);
</script>

    <script>

// ================= VARIABLES =================
let historialVentas = JSON.parse(localStorage.getItem("historialVentas")) || [];

// ================= CARGAR PRODUCTOS =================
function cargarProductosVenta(){
  const select = document.getElementById("productoVenta");
  if(!select) return;

  select.innerHTML = "";

  document.querySelectorAll(".fila").forEach((fila,i)=>{
    const nombre = fila.querySelector("span").textContent;
    const marca = fila.closest(".marca").querySelector("h3").textContent;
    const tipo = fila.closest(".card").querySelector("h2").textContent;
    const precio = fila.dataset.precio || 0;

    const option = document.createElement("option");
    option.value = i;
    option.textContent = `${tipo} - ${marca} - ${nombre} - $${precio}`;
    option.dataset.precio = precio;

    select.appendChild(option);
  });
}

// ================= VENDER =================
function vender(){

  const select = document.getElementById("productoVenta");
  const cantidad = Number(document.getElementById("cantidadVenta").value);
  const precio = Number(select.selectedOptions[0].dataset.precio);
  const index = select.value;

  const filas = document.querySelectorAll(".fila");
  const fila = filas[index];
  const numero = fila.querySelector("[data-count]");
  let stock = Number(numero.textContent);

  if(cantidad <= 0){
    alert("Cantidad invÃ¡lida");
    return;
  }

  if(cantidad > stock){
    alert("No hay suficiente stock");
    return;
  }

  stock -= cantidad;
  numero.textContent = stock;

  const total = precio * cantidad;

  const venta = {
    producto: select.selectedOptions[0].textContent,
    cantidad,
    total,
    fecha: new Date().toISOString()
  };

  historialVentas.push(venta);
  localStorage.setItem("historialVentas", JSON.stringify(historialVentas));

  guardarLocal();
  actualizarHistorial();
  actualizarGananciaHoy();

  cancelarVenta(); // limpia automÃ¡ticamente
}

// ================= HISTORIAL =================
function actualizarHistorial(){
  const contenedor = document.getElementById("listaHistorial");
  if(!contenedor) return;

  contenedor.innerHTML = "";

  historialVentas.forEach(v=>{
    contenedor.innerHTML += `
      <div class="marca">
        <strong>${v.producto}</strong><br>
        Cantidad: ${v.cantidad}<br>
        Total: $${v.total}<br>
        Fecha: ${v.fecha}
      </div>
    `;
  });
}

function actualizarGananciaHoy(){

  const hoy = new Date().toDateString();
  let totalHoy = 0;

  historialVentas.forEach(venta => {
      const fechaVenta = new Date(venta.fecha).toDateString();

      if(fechaVenta === hoy){
          totalHoy += Number(venta.total);
      }
  });

  document.getElementById("gananciaHoy").textContent = totalHoy;
}

// ================= INICIAR =================
window.addEventListener("load", ()=>{
  cargarProductosVenta();
  actualizarHistorial();
  actualizarGananciaHoy();
});
// ================= CALCULAR TOTAL =================
function calcularTotal(){
  const select = document.getElementById("productoVenta");
  const cantidad = Number(document.getElementById("cantidadVenta").value);
  const precio = Number(select.selectedOptions[0].dataset.precio);

  document.getElementById("precioUnitario").textContent = precio;
  document.getElementById("totalVenta").textContent = precio * cantidad;
}

// ================= CANCELAR VENTA =================
function cancelarVenta(){
  document.getElementById("cantidadVenta").value = 1;
  document.getElementById("precioUnitario").textContent = 0;
  document.getElementById("totalVenta").textContent = 0;
}
        function borrarVentasHoy(){

  const hoy = new Date().toDateString();

  historialVentas = historialVentas.filter(venta =>
      new Date(venta.fecha).toDateString() !== hoy
  );

  localStorage.setItem("historialVentas", JSON.stringify(historialVentas));

  actualizarHistorial();
  actualizarGananciaHoy();
}
// ================= REGISTRO DE CARROS =================

let listaCarros = JSON.parse(localStorage.getItem("listaCarros")) || [];

function guardarCarro(){

    const placas = document.getElementById("placas").value.trim();
    const marca = document.getElementById("marca").value.trim();
    const modelo = document.getElementById("modelo").value.trim();
    const servicio = document.getElementById("servicio").value.trim();
    const fecha = document.getElementById("fecha").value;

    if(!placas || !marca || !modelo || !servicio || !fecha){
        alert("Completa todos los campos");
        return;
    }

    const carro = { placas, marca, modelo, servicio, fecha };

    listaCarros.push(carro);
    localStorage.setItem("listaCarros", JSON.stringify(listaCarros));

    limpiarFormulario();
    mostrarCarros();
}

function mostrarCarros(){

    const contenedor = document.getElementById("listaCarros");
    contenedor.innerHTML = "";

    listaCarros.forEach((carro,index)=>{
        contenedor.innerHTML += `
            <div class="tarjeta-carro">
                <strong>${carro.placas}</strong><br>
                Marca: ${carro.marca}<br>
                Modelo: ${carro.modelo}<br>
                Servicio: ${carro.servicio}<br>
                Fecha: ${carro.fecha}<br>
                <button onclick="eliminarCarro(${index})" class="restar">
                    Eliminar
                </button>
            </div>
        `;
    });
}

function eliminarCarro(index){
    listaCarros.splice(index,1);
    localStorage.setItem("listaCarros", JSON.stringify(listaCarros));
    mostrarCarros();
}

function limpiarFormulario(){
    document.getElementById("placas").value="";
    document.getElementById("marca").value="";
    document.getElementById("modelo").value="";
    document.getElementById("servicio").value="";
    document.getElementById("fecha").value="";
}

// cargar al abrir
window.addEventListener("load", mostrarCarros);
        
</script>
    
</body>
</html>











