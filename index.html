<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AlmacÃ©n de Aceites</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ff8c1a">
    <link rel="icon" type="image/png" href="icono.png">


<style>

:root{
    --naranja:#ff8c1a;
    --negro:#000;
    --gris:#1a1a1a;
    --gris2:#262626;
    --blanco:#fff;
}

/* ================= BASE ================= */

body{
    margin:0;
    background:var(--negro);
    color:var(--blanco);
    font-family:Arial, sans-serif;
    padding:20px;
    padding-bottom:120px;
}

h1{
    text-align:center;
    color:var(--naranja);
}

.seccion{ display:none; }
.seccion.activa{ display:block; }

/* ================= ALMACEN ================= */

.almacen{
    display:flex;
    justify-content:center;
    align-items:flex-start;
    gap:40px;
    max-width:1200px;
    margin:30px auto;
    flex-wrap:wrap;
}

.card{
    width:420px;
    background:var(--gris);
    border-radius:20px;
    border:2px solid var(--naranja);
    padding:20px;
}

.card h2{
    text-align:center;
    color:var(--naranja);
}

.marca{
    background:var(--gris2);
    border-radius:16px;
    padding:16px;
    margin-bottom:20px;
}

.marca h3{
    text-align:center;
    color:#ffd199;
}

.subtitulo{
    text-align:center;
    font-weight:bold;
    color:var(--naranja);
    margin:12px 0 8px;
    border-bottom:1px solid var(--naranja);
    padding-bottom:4px;
}

.fila{
    display:grid;
    grid-template-columns: 1.6fr 45px 30px 30px;
    gap:6px;
    align-items:center;
    margin-bottom:6px;
}

.numero{
    text-align:center;
    font-size:17px;
    font-weight:bold;
}

/* ================= BOTONES ================= */

button{
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-size:15px;
    transition:0.15s ease;
}

button:active{
    transform:scale(0.95);
}

.restar{ background:#444; color:white; }
.sumar{ background:var(--naranja); color:black; }

/* ================= REGISTRO ================= */

.registro{
    max-width:900px;
    margin:30px auto;
}

.registro table{
    width:100%;
    border-collapse:collapse;
}

.registro th,.registro td{
    border:1px solid var(--naranja);
    padding:8px;
    text-align:center;
}

.registro input{
    width:100%;
    background:#000;
    color:#fff;
    border:none;
    text-align:center;
}

/* ================= MENU INFERIOR ================= */

.menu{
    position:fixed;
    bottom:0;
    left:0;
    width:100%;
    background:#111;
    border-top:2px solid var(--naranja);
    display:flex;
    justify-content:center;
    gap:20px;
    padding:10px 0;
    z-index:9999;
}

.menu button{
    background:var(--gris2);
    color:white;
    border:1px solid var(--naranja);
    padding:10px 18px;
    border-radius:12px;
    font-size:14px;
}

.menu button.activo{
    background:var(--naranja);
    color:black;
}

/* ================= ESTADO GUARDADO ================= */


/* ================= RESPONSIVE CELULAR ================= */

@media (max-width:768px){

    body{
        padding:10px;
        padding-bottom:130px;
    }

    .card{
        width:100%;
    }

    .almacen{
        gap:20px;
    }

    h1{
        font-size:22px;
    }

    .fila{
        grid-template-columns:1fr 40px 35px 35px;
    }

    .menu button{
        font-size:13px;
        padding:8px 12px;
    }

}
    /* ===== NUEVO DISEÃ‘O VENTAS ===== */

.ventas-card{
    max-width:900px;
    margin:auto;
    padding:30px;
}

.tabla-ventas{
    width:100%;
    border-collapse:collapse;
    font-size:18px;
}

.tabla-ventas th{
    padding:15px;
    border-bottom:2px solid orange;
}

.tabla-ventas td{
    padding:15px;
    text-align:center;
}

.tabla-ventas select,
.tabla-ventas input{
    width:100%;
    padding:8px;
    font-size:16px;
    text-align:center;
}

.botones-ventas{
    display:flex;
    justify-content:center;
    gap:15px;
    margin-top:20px;
    flex-wrap:wrap;
}

.ganancia{
    text-align:center;
    font-size:24px;
    margin-top:20px;
}

/* RESPONSIVO PARA CELULAR */
@media(max-width:600px){

    .tabla-ventas{
        font-size:14px;
    }

    .ventas-card{
        padding:15px;
    }

    .ganancia{
        font-size:20px;
    }
}

    /* ================= NUEVO REGISTRO ================= */

.registro-nuevo{
    max-width:900px;
    margin:auto;
    background:var(--gris);
    border:2px solid var(--naranja);
    border-radius:20px;
    padding:25px;
}

.form-carro{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:20px;
}

.campo{
    display:flex;
    flex-direction:column;
}

.campo label{
    margin-bottom:5px;
    font-weight:bold;
    color:var(--naranja);
}

.campo input{
    padding:10px;
    border-radius:8px;
    border:none;
    background:#000;
    color:white;
    font-size:15px;
}

.btn-guardar{
    margin-top:20px;
    width:100%;
    padding:12px;
    font-size:16px;
}

#listaCarros{
    margin-top:20px;
}

.tarjeta-carro{
    background:var(--gris2);
    padding:15px;
    border-radius:12px;
    margin-bottom:15px;
    border-left:5px solid var(--naranja);
}

.tarjeta-carro button{
    margin-top:10px;
}

/* CELULAR */
@media(max-width:600px){
    .form-carro{
        grid-template-columns:1fr;
    }
}
.btn-agregar{
background:green;
color:white;
padding:10px 15px;
border:none;
border-radius:8px;
cursor:pointer;
}
    .inventario-app{
max-width:900px;
margin:auto;
}

.card-item{
background:#1a1a1a;
border:2px solid orange;
border-radius:16px;
padding:20px;
margin:15px 0;
cursor:pointer;
transition:0.2s;
}

.card-item:hover{
transform:scale(1.02);
}

.stock-bajo{
color:red;
font-weight:bold;
}

.detalle-box{
background:#111;
border:2px solid orange;
border-radius:16px;
padding:20px;
margin-top:20px;
}

.movimiento-box{
margin-top:20px;
background:#1a1a1a;
padding:15px;
border-radius:12px;
}
</style>
</head>

<body>

  
  <div class="menu">
    <button id="btnAlmacen" class="activo" onclick="mostrar('almacen')">
        ðŸ›¢ Inventario
    </button>

    <button id="btnVentas" onclick="mostrar('ventas')">
        ðŸ’° Ventas
    </button>

    <button id="btnRegistro" onclick="mostrar('registro')">
        ðŸš— Registro
    </button>
</div>


<section id="registro" class="seccion">
<h1>Registro de Carros</h1>

<div class="registro-nuevo">

<div class="form-carro">
    <div class="campo">
        <label>Placas</label>
        <input type="text" id="placas">
    </div>

    <div class="campo">
        <label>Marca</label>
        <input type="text" id="marca">
    </div>

    <div class="campo">
        <label>Modelo</label>
        <input type="text" id="modelo">
    </div>

    <div class="campo">
        <label>Servicio Realizado</label>
        <input type="text" id="servicio">
    </div>

    <div class="campo">
        <label>Fecha</label>
        <input type="date" id="fecha">
    </div>
</div>

<button onclick="guardarCarro()" class="sumar btn-guardar">
    Guardar Registro
</button>

<hr>

<div id="listaCarros"></div>

</div>
</section>
<h1>Inventario del Taller</h1>

<div class="inventario-app">

<!-- VISTA LISTA -->
<div id="vistaLista">
    <button onclick="mostrarFormularioNuevo()" class="btn-agregar">
        âž• Nuevo ArtÃ­culo
    </button>

    <div id="listaInventario"></div>
</div>

<!-- VISTA DETALLE -->
<div id="vistaDetalle" style="display:none;">
    <button onclick="volverLista()">â¬… Volver</button>
    <div id="detalleProducto"></div>
</div>

</div>
<!-- ================= VENTAS ================= -->
<!-- ================= VENTAS NUEVO DISEÃ‘O ================= -->
<section id="ventas" class="seccion">
<h1>Venta de Aceite</h1>

<div class="card ventas-card">

<table class="tabla-ventas">
<thead>
<tr>
<th style="width:40%;">Producto</th>
<th style="width:15%;">Cantidad</th>
<th style="width:15%;">Precio</th>
<th style="width:15%;">Total</th>
</tr>
</thead>

<tbody>
<tr>
<td>
<select id="productoVenta"></select>
</td>

<td>
<input type="number" id="cantidadVenta" min="1" value="1">
</td>

<td>
$<span id="precioUnitario">0</span>
</td>

<td>
$<span id="totalVenta">0</span>
</td>
</tr>
</tbody>
</table>

<div class="botones-ventas">
<button onclick="calcularTotal()" class="sumar">Calcular</button>
<button onclick="vender()" class="sumar">Confirmar</button>
<button onclick="cancelarVenta()" class="restar">Cancelar</button>
</div>

<hr>
    <h2 style="text-align:center; color:orange;">Historial de Ventas</h2>

<div id="listaHistorial"></div>

<h2 class="ganancia">
Ganancia Hoy: $<span id="gananciaHoy">0</span>
</h2>

<div class="botones-ventas">
<button onclick="borrarVentasHoy()" class="restar">
Borrar Ventas de Hoy
</button>

<button onclick="reiniciarTodo()" class="restar">
Reiniciar Todo
</button>
</div>

</div>
</section>
<script>
// ================= MENU =================
function mostrar(id){
    document.querySelectorAll('.seccion').forEach(s=>{
        s.classList.remove('activa');
    });

    const seccion = document.getElementById(id);
    if(seccion){
        seccion.classList.add('activa');
    }

    document.querySelectorAll('.menu button').forEach(b=>{
        b.classList.remove('activo');
    });

    const btn = document.getElementById(
        'btn' + id.charAt(0).toUpperCase() + id.slice(1)
    );

    if(btn){
        btn.classList.add('activo');
    }
}
// ================= INVENTARIO TABLA PROFESIONAL =================

// Base de datos local
let inventario = JSON.parse(localStorage.getItem("inventarioTabla")) || [];

// Referencia tabla
const tabla = document.getElementById("tablaInventario");

// ================= GUARDAR =================
function guardarInventario(){
    localStorage.setItem("inventarioTabla", JSON.stringify(inventario));
}

// ================= RENDER =================
function renderTabla(){

    if(!tabla) return;

    tabla.innerHTML = "";

    inventario.forEach((item,index)=>{

        const colorStock = item.stock <= 3 ? "red" : "white";

        tabla.innerHTML += `
        <tr>
            <td>${item.producto}</td>
            <td>${item.categoria}</td>
            <td>${item.marca}</td>
            <td>$${item.precio}</td>
            <td style="color:${colorStock}; font-weight:bold;">
                ${item.stock}
            </td>
            <td>
                <button onclick="sumarStock(${index})">+</button>
            </td>
            <td>
                <button onclick="restarStock(${index})">-</button>
            </td>
            <td>
                <button onclick="eliminarArticulo(${index})">
                    Eliminar
                </button>
            </td>
        </tr>
        `;
    });

    guardarInventario();
}

// ================= AGREGAR =================
function agregarArticulo(){

    const producto = prompt("Nombre del producto:");
    if(!producto) return;

    const categoria = prompt("CategorÃ­a:");
    if(!categoria) return;

    const marca = prompt("Marca:");
    if(!marca) return;

    const precio = Number(prompt("Precio:"));
    if(isNaN(precio) || precio < 0){
        alert("Precio invÃ¡lido");
        return;
    }

    const stock = Number(prompt("Stock inicial:"));
    if(isNaN(stock) || stock < 0){
        alert("Stock invÃ¡lido");
        return;
    }

    inventario.push({
        producto: producto.trim(),
        categoria: categoria.trim(),
        marca: marca.trim(),
        precio: precio,
        stock: stock
    });

    renderTabla();
}

// ================= SUMAR =================
function sumarStock(index){
    inventario[index].stock++;
    renderTabla();
}

// ================= RESTAR =================
function restarStock(index){
    if(inventario[index].stock > 0){
        inventario[index].stock--;
        renderTabla();
    }
}

// ================= ELIMINAR =================
function eliminarArticulo(index){

    const confirmar = confirm("Â¿Eliminar este artÃ­culo?");
    if(!confirmar) return;

    inventario.splice(index,1);
    renderTabla();
}

// ================= INICIAR =================
window.addEventListener("load", ()=>{
    renderTabla();
});
    // ================= INVENTARIO APP MODERNO =================

let inventarioApp = JSON.parse(localStorage.getItem("inventarioApp")) || [];
let productoActual = null;

function guardarInventarioApp(){
    localStorage.setItem("inventarioApp", JSON.stringify(inventarioApp));
}

// ===== RENDER LISTA =====
function renderLista(){

    const contenedor = document.getElementById("listaInventario");
    contenedor.innerHTML = "";

    inventarioApp.forEach((item,index)=>{

        const colorStock = item.stock <= 3 ? "stock-bajo" : "";

        contenedor.innerHTML += `
        <div class="card-item" onclick="verDetalle(${index})">
            <h3>${item.nombre}</h3>
            <p>${item.categoria}</p>
            <p class="${colorStock}">Stock: ${item.stock}</p>
        </div>
        `;
    });

    guardarInventarioApp();
}

// ===== NUEVO ARTICULO =====
function mostrarFormularioNuevo(){

    const nombre = prompt("Nombre del producto:");
    if(!nombre) return;

    const categoria = prompt("CategorÃ­a:");
    if(!categoria) return;

    const marca = prompt("Marca:");
    if(!marca) return;

    const precio = Number(prompt("Precio:"));
    if(isNaN(precio)) return;

    inventarioApp.push({
        nombre,
        categoria,
        marca,
        precio,
        stock:0,
        fechaCreacion: new Date().toLocaleDateString(),
        historial:[]
    });

    renderLista();
}

// ===== VER DETALLE =====
function verDetalle(index){

    productoActual = index;

    document.getElementById("vistaLista").style.display="none";
    document.getElementById("vistaDetalle").style.display="block";

    const item = inventarioApp[index];

    let historialHTML = "";

    item.historial.forEach(m=>{
        historialHTML += `
        <p>${m.fecha} - ${m.tipo} ${m.cantidad}</p>
        `;
    });

    document.getElementById("detalleProducto").innerHTML = `
        <div class="detalle-box">
            <h2>${item.nombre}</h2>
            <p>CategorÃ­a: ${item.categoria}</p>
            <p>Marca: ${item.marca}</p>
            <p>Precio: $${item.precio}</p>
            <p><strong>Stock actual: ${item.stock}</strong></p>
            <p>Creado: ${item.fechaCreacion}</p>

            <button onclick="mostrarMovimiento()">Modificar Stock</button>

            <div id="movimientoArea"></div>

            <h3>Historial</h3>
            ${historialHTML || "<p>Sin movimientos</p>"}
        </div>
    `;
}

// ===== VOLVER =====
function volverLista(){
    document.getElementById("vistaLista").style.display="block";
    document.getElementById("vistaDetalle").style.display="none";
}

// ===== MOSTRAR MOVIMIENTO =====
function mostrarMovimiento(){

    document.getElementById("movimientoArea").innerHTML = `
        <div class="movimiento-box">
            <select id="tipoMovimiento">
                <option value="sumar">Sumar</option>
                <option value="restar">Restar</option>
            </select>

            <input type="number" id="cantidadMovimiento" placeholder="Cantidad">

            <button onclick="guardarMovimiento()">Guardar</button>
        </div>
    `;
}

// ===== GUARDAR MOVIMIENTO =====
function guardarMovimiento(){

    const tipo = document.getElementById("tipoMovimiento").value;
    const cantidad = Number(document.getElementById("cantidadMovimiento").value);

    if(isNaN(cantidad) || cantidad <= 0) return;

    const item = inventarioApp[productoActual];

    if(tipo === "sumar"){
        item.stock += cantidad;
    }else{
        if(item.stock < cantidad) return alert("No hay suficiente stock");
        item.stock -= cantidad;
    }

    item.historial.push({
        tipo,
        cantidad,
        fecha:new Date().toLocaleString()
    });

    guardarInventarioApp();
    verDetalle(productoActual);
}

// ===== INICIAR =====
window.addEventListener("load", renderLista);

</script>
    
</body>
</html>















